<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG to PNG Drag-and-Drop</title>
  <style>
    body { 
      font-family: system-ui, -apple-system, sans-serif; 
      max-width: 800px; 
      margin: 2rem auto; 
      padding: 0 1rem; 
      display: flex; 
      flex-direction: column; 
      gap: 1rem; 
      background-color: #f9fafb; 
      color: #111827; 
    }
    textarea { 
      width: 100%; 
      height: 200px; 
      padding: 1rem; 
      font-family: monospace; 
      font-size: 14px;
      border: 1px solid #d1d5db; 
      border-radius: 0.5rem; 
      resize: vertical; 
      box-sizing: border-box; 
    }
    button { 
      padding: 0.75rem 1.5rem; 
      background-color: #2563eb; 
      color: white; 
      border: none; 
      border-radius: 0.5rem; 
      font-weight: 600; 
      cursor: pointer; 
      transition: background-color 0.2s; 
      align-self: flex-start; 
    }
    button:hover { 
      background-color: #1d4ed8; 
    }
    .output-container { 
      margin-top: 1rem; 
      padding: 2rem; 
      border: 2px dashed #9ca3af; 
      border-radius: 0.5rem; 
      background-color: white; 
      text-align: center; 
      min-height: 200px; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center; 
    }
    #outputImage { 
      max-width: 100%; 
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); 
      border-radius: 4px; 
      cursor: grab; 
      display: none; 
    }
    #outputImage:active { 
      cursor: grabbing; 
    }
    .instructions { 
      color: #059669; 
      font-weight: 500;
      font-size: 0.875rem; 
      margin-top: 1rem; 
      display: none; 
    }
  </style>
</head>
<body>

  <h1>SVG to PNG Converter</h1>
  <p>Paste your SVG code below. The app will generate a PNG that you can instantly drag and drop into other websites.</p>

  <textarea id="svgInput" placeholder='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <circle cx="50" cy="50" r="40" fill="red" />
</svg>'></textarea>

  <button id="convertBtn">Render PNG</button>

  <div class="output-container" id="outputContainer">
    <span id="placeholderText" style="color: #9ca3af;">Your PNG will appear here</span>
    <img id="outputImage" alt="Generated PNG" draggable="true" />
    <div class="instructions" id="instructions">âœ¨ Success! Click and drag this image into another website.</div>
  </div>

  <script>
    const svgInput = document.getElementById('svgInput');
    const convertBtn = document.getElementById('convertBtn');
    const outputImage = document.getElementById('outputImage');
    const placeholderText = document.getElementById('placeholderText');
    const instructions = document.getElementById('instructions');

    convertBtn.addEventListener('click', () => {
      const svgCode = svgInput.value.trim();
      if (!svgCode) {
        alert('Please paste some SVG code first.');
        return;
      }

      // 1. Create a Blob from the raw SVG code
      const svgBlob = new Blob([svgCode], { type: 'image/svg+xml;charset=utf-8' });
      const DOMURL = window.URL || window.webkitURL || window;
      const url = DOMURL.createObjectURL(svgBlob);

      // 2. Load the SVG blob into an Image element
      const img = new Image();
      
      img.onload = () => {
        // 3. Draw the SVG onto a Canvas
        const canvas = document.createElement('canvas');
        
        // Grab the natural width/height of the SVG, or use defaults
        canvas.width = img.width || 300; 
        canvas.height = img.height || 300; 
        
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0);

        // 4. Convert the Canvas into a raw PNG data URL
        const pngDataUrl = canvas.toDataURL('image/png');

        // 5. Update the UI
        outputImage.src = pngDataUrl;
        outputImage.style.display = 'block';
        placeholderText.style.display = 'none';
        instructions.style.display = 'block';

        // 6. Clean up browser memory
        DOMURL.revokeObjectURL(url);
      };

      img.onerror = () => {
        alert('Oops! That SVG code seems to be invalid. Please check for missing tags.');
        DOMURL.revokeObjectURL(url);
      };

      // Trigger the image load
      img.src = url;
    });
  </script>
</body>
</html>